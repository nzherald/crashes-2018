/*! UA-Web-Push: 0167010:1530575610724 */
(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=26)})([function(module,exports,__webpack_require__){var VERSION=__webpack_require__(20).version;var config={VERSION:VERSION,configured:false,workerUrl:"/push-worker.js",apiUrl:"https://web-push-api.urbanairship.com",storagePrefix:"_ua_sdk",disableAnalytics:false,appKey:null,secret:null,token:null,vapidPublicKey:null,debug:false,paths:{cla:"/api/channels",cra:"/api/web-channels",tags:"/api/web-channels/tags/",custom_events:"/api/web-events/custom",named_user:{associate:"/api/named_users/associate",disassociate:"/api/named_users/disassociate"},reports:{direct:"/api/web-events/direct",session:"/api/web-events/session"}},consts:{DISABLE_ANALYTICS:"disable_analytics"}};try{config.secureHost="https://"+window.location.host;config.insecureHost="http://"+window.location.host}catch(e){}module.exports=config},function(module,exports,__webpack_require__){var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var config=__webpack_require__(0);var debug=__webpack_require__(6);var global=void 0;try{global=window}catch(e){global=self}module.exports=function request(path,options){path=""+config.apiUrl+path;var headers={Accept:"application/vnd.urbanairship+json; version=3;"};if(config.appKey&&config.token){headers["X-UA-Appkey"]=config.appKey;headers["Authorization"]="Bearer "+config.token}else if(config.appKey&&config.secret){var authstr=global.btoa(config.appKey+":"+config.secret);headers["Authorization"]="Basic "+authstr}options.credentials="include";if(options.body){headers["Content-type"]="application/json";if(typeof options.body!=="string"){options.body=JSON.stringify(options.body)}}options.headers=options.headers||{};_extends(options.headers,headers);debug("REQUEST",path,options);return global.fetch(path,options)}},function(module,exports,__webpack_require__){var config=__webpack_require__(0);var EVENT_TYPES=["tags","channel"];module.exports={set:function(key,value){return window.localStorage.setItem(keyName(key),value)},get:function(key){return window.localStorage.getItem(keyName(key))},setJSON:function(key,value){return this.set(key,JSON.stringify(value))},getJSON:function(key){return JSON.parse(this.get(key))},remove:function(key){return window.localStorage.removeItem(keyName(key))},onStorage:function(ready){return function onStorage(ev){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=EVENT_TYPES[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var type=_step.value;var key=config.storagePrefix+":"+type;if(ev.key===key){var data={};data[type]=JSON.parse(ev.newValue);ready(data)}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}}};function keyName(key){return config.storagePrefix+":"+key}},function(module,exports,__webpack_require__){var config=__webpack_require__(0);var global=void 0;try{global=window}catch(e){global=self}module.exports={getDB:getDB,getObjectStore:getObjectStore,requestToPromise:requestToPromise,get:get,set:set,remove:remove};var DB=void 0;function getDB(){if(DB){return DB}DB=new Promise(function(resolve,reject){var request=global.indexedDB.open(config.storagePrefix+":db",1);request.addEventListener("upgradeneeded",function(ev){var db=ev.target.result;db.createObjectStore("blob",{keyPath:"type"})});request.addEventListener("success",function(ev){return resolve(request.result)});request.addEventListener("error",function(ev){return reject(ev)})});return DB}function getObjectStore(){var writable=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var readwrite=writable?"readwrite":"readonly";return getDB().then(function(db){return db.transaction(["blob"],readwrite).objectStore("blob")})}function requestToPromise(request){var success=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(ev){return ev.target.result};var error=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(ev){return ev.target.error};return new Promise(function(resolve,reject){request.addEventListener("success",function(ev){return resolve(success(ev))});request.addEventListener("error",function(ev){return reject(error(ev))})})}function get(key){return getObjectStore().then(function(os){return requestToPromise(os.get(key),function(ev){if(ev.target.result===undefined){return undefined}return ev.target.result.value})})}function set(key,value){return getObjectStore(true).then(function(os){return requestToPromise(os.put({type:key,value:value}))})}function remove(key,value){return getObjectStore(true).then(function(os){return requestToPromise(os.delete(key))})}},function(module,exports,__webpack_require__){var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var isIsoDate=__webpack_require__(36);var location=__webpack_require__(32);var storage=__webpack_require__(2);var request=__webpack_require__(1);var config=__webpack_require__(0);var shouldReport=__webpack_require__(5).shouldReport;var MAX_STRING_LENGTH=255;var MAX_PROPERTY_ARRAY_LENGTH=20;var MAX_PROPERTIES=100;var CustomEvent=function(){function CustomEvent(name){var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;var properties=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var transactionId=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;_classCallCheck(this,CustomEvent);if(!name){throw new ReferenceError("argument: `name` is required.")}this._channel=storage.getJSON("channel")||{};if(!this._channel.channel_id){throw new ReferenceError("You must have a registered channel to send events.")}this._name=name;this.value=value;this.properties=properties;this.transactionId=transactionId;this.interactionId=location().href;this.interactionType="url"}_createClass(CustomEvent,[{key:"_prepareProperties",value:function _prepareProperties(){return this.properties}},{key:"_prepareInteractionId",value:function _prepareInteractionId(){var _this=this;if(this.interactionId===location().href&&this.interactionId.length<=255){return Promise.resolve(false)}var buffer=new window.TextEncoder("utf-8").encode(this.interactionId);return window.crypto.subtle.digest("SHA-256",buffer).then(function(hash){var digest=Array.from(new Uint8Array(hash)).map(function(b){return("0"+b.toString(16)).slice(-2)}).join("");_this.interactionId=_this.interactionId.slice(0,230)+"..."+digest.slice(0,20);return true})}},{key:"validate",value:function validate(){if(Object.keys(this.properties).length>MAX_PROPERTIES){throw new RangeError("CustomEvent: Can not have more than "+MAX_PROPERTIES+" properties.")}var stringProperties=["name","transactionId","interactionId","interactionId"];checkStrings(this,stringProperties);checkStrings(this.properties,Object.keys(this.properties),"CustomEvent.properties",false);function checkStrings(obj,keys){var name=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"CustomEvent";var stringsOnly=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=keys[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var str=_step.value;var val=obj[str];if(val!==undefined){if(stringsOnly){if(typeof val!=="string"){throw new TypeError(name+"."+str+" must be a string")}}else{var type=typeof val;if(!(type==="string"||type==="number"||type==="boolean"||Array.isArray(val))){throw new TypeError(name+"."+str+" must be one of String, Number, Boolean or Array")}}if(typeof val==="string"&&val.length>MAX_STRING_LENGTH){throw new RangeError(name+"."+str+" has a "+MAX_STRING_LENGTH+" character limit")}if(Array.isArray(val)){if(val.some(function(s){return typeof s!=="string"||s.length>MAX_STRING_LENGTH})){throw new TypeError(name+"."+str+": Array properties may only contain strings less than "+MAX_STRING_LENGTH+" characters in length")}if(val.length>MAX_PROPERTY_ARRAY_LENGTH){throw new RangeError(name+"."+str+": Array properties have a max-length of "+MAX_PROPERTY_ARRAY_LENGTH)}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}}},{key:"_validateBooleanProperty",value:function _validateBooleanProperty(prop){if(this.properties&&this.properties.hasOwnProperty(prop)&&typeof this.properties[prop]!=="boolean"){throw new TypeError("CustomEvent property '"+prop+"' must be a Boolean")}}},{key:"_validateIsoDateProperty",value:function _validateIsoDateProperty(prop){if(this.properties&&this.properties.hasOwnProperty(prop)&&!isIsoDate(this.properties[prop])){throw new TypeError("CustomEvent property '"+prop+"' must be an ISO_8601 date string")}}},{key:"toJSON",value:function toJSON(){var session=storage.getJSON("session")||{};var user={web_channel:this._channel.channel_id};var occurred=(new Date).toISOString().split(".")[0]+"Z";var body={name:this.name,value:this.value,transaction:this.transactionId,interaction_id:this.interactionId,interaction_type:this.interactionType,template_type:this.templateType,send_id:session.send_id,session_id:session.id};var properties=this._prepareProperties();if(Object.keys(properties).length){body.properties=properties}return{occurred:occurred,user:user,body:body}}},{key:"track",value:function track(){var _this2=this;return shouldReport(this._channel.opt_in).then(function(should){if(!should){return{ok:false,message:"Channel is not opted in or analytics are disabled."}}return _this2._prepareInteractionId().then(function(){_this2.validate();return request(config.paths.custom_events,{method:"post",body:_this2.toJSON()}).then(function(resp){return resp.json()})})})}},{key:"value",get:function(){return this._value},set:function(value){if(value){value=Number(value);if(Number.isNaN(value)||typeof value!=="number"){throw new TypeError("`value` must be a number")}}this._value=value}},{key:"name",get:function(){return this._name}}]);return CustomEvent}();module.exports=CustomEvent;module.exports.templates={account:__webpack_require__(23),media:__webpack_require__(24),retail:__webpack_require__(25)}},function(module,exports,__webpack_require__){var uuid=__webpack_require__(39);var config=__webpack_require__(0);var db=__webpack_require__(3);var request=__webpack_require__(1);var storage=__webpack_require__(2);var isAfter=__webpack_require__(16);var getSendId=__webpack_require__(28);module.exports={direct:direct,session:session,sendSession:sendSession,getSession:getSession,shouldReport:shouldReport};function direct(channel,send_id){return shouldReport(channel.optedIn).then(function(should){if(!should){return false}var path=config.paths.reports.direct;var body={channel:channel.toJSON(),send_id:send_id};return request(path,{method:"post",body:body})})}function session(channel,_sessionObj){if(_sessionObj){return sendSession(channel,_sessionObj)}return getSession().then(function(sessionObj){return sessionObj&&sendSession(channel,sessionObj)})}function sendSession(channel,sessionObj){return shouldReport(channel.optedIn).then(function(should){if(!should){return false}var body={session_id:sessionObj.id,send_id:sessionObj.send_id,channel:channel.toJSON()};storage.setJSON("session",sessionObj);return request(config.paths.reports.session,{method:"post",body:body})})}function getSession(){var _isAfter=isAfter("activity",.5),after=_isAfter.after,store=_isAfter.store;store();return getSendId().then(function(sendId){if(sendId||after){var sessionId=uuid();return{id:sessionId,send_id:sendId}}})}function shouldReport(optedIn){if(!optedIn||config.disableAnalytics){return Promise.resolve(false)}return db.get(config.consts.DISABLE_ANALYTICS).then(function(disabled){return!disabled})}},function(module,exports,__webpack_require__){var config=__webpack_require__(0);module.exports=function debug(){if(config.debug){var _console;(_console=console).log.apply(_console,arguments)}}},function(module,exports,__webpack_require__){var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var config=__webpack_require__(0);var global=void 0;try{global=window}catch(e){global=self}module.exports=function configure(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(config.configured){return config}delete opts.paths;delete opts.consts;_extends(config,opts);config.storagePrefix=global.btoa(config.storagePrefix+":"+config.appKey+":"+config.workerUrl);config.configured=true;return config}},function(module,exports){module.exports=function isSupported(){var match=navigator.userAgent.match(/Chrome\/(\d\d)\./);if(match&&Number(match[1])<52){return false}return!!(navigator.serviceWorker&&window.PushManager)}},function(module,exports,__webpack_require__){"use strict";var createUniqueKey=module.exports.createUniqueKey=typeof Symbol!=="undefined"?Symbol:function createUniqueKey(name){return"[["+name+"_"+Math.random().toFixed(8).slice(2)+"]]"};var isObject=module.exports.isObject=function isObject(x){return typeof x==="object"&&x!==null};module.exports.LISTENERS=createUniqueKey("listeners");module.exports.CAPTURE=1;module.exports.BUBBLE=2;module.exports.ATTRIBUTE=3;module.exports.newNode=function newNode(listener,kind,options){var obj=isObject(options);return{listener:listener,kind:kind,once:obj&&Boolean(options.once),passive:obj&&Boolean(options.passive),next:null}}},function(module,exports,__webpack_require__){"use strict";var Commons=__webpack_require__(9);var CustomEventTarget=__webpack_require__(34);var EventWrapper=__webpack_require__(35);var isObject=Commons.isObject;var LISTENERS=Commons.LISTENERS;var CAPTURE=Commons.CAPTURE;var BUBBLE=Commons.BUBBLE;var ATTRIBUTE=Commons.ATTRIBUTE;var newNode=Commons.newNode;var defineCustomEventTarget=CustomEventTarget.defineCustomEventTarget;var createEventWrapper=EventWrapper.createEventWrapper;var STOP_IMMEDIATE_PROPAGATION_FLAG=EventWrapper.STOP_IMMEDIATE_PROPAGATION_FLAG;var PASSIVE_LISTENER_FLAG=EventWrapper.PASSIVE_LISTENER_FLAG;var HAS_EVENTTARGET_INTERFACE=typeof window!=="undefined"&&typeof window.EventTarget!=="undefined";var EventTarget=module.exports=function EventTarget(){if(this instanceof EventTarget){Object.defineProperty(this,LISTENERS,{value:Object.create(null)})}else if(arguments.length===1&&Array.isArray(arguments[0])){return defineCustomEventTarget(EventTarget,arguments[0])}else if(arguments.length>0){var types=Array(arguments.length);for(var i=0;i<arguments.length;++i){types[i]=arguments[i]}return defineCustomEventTarget(EventTarget,types)}else{throw new TypeError("Cannot call a class as a function")}};EventTarget.prototype=Object.create((HAS_EVENTTARGET_INTERFACE?window.EventTarget:Object).prototype,{constructor:{value:EventTarget,writable:true,configurable:true},addEventListener:{value:function addEventListener(type,listener,options){if(listener==null){return false}if(typeof listener!=="function"&&typeof listener!=="object"){throw new TypeError('"listener" is not an object.')}var capture=isObject(options)?Boolean(options.capture):Boolean(options);var kind=capture?CAPTURE:BUBBLE;var node=this[LISTENERS][type];if(node==null){this[LISTENERS][type]=newNode(listener,kind,options);return true}var prev=null;while(node!=null){if(node.listener===listener&&node.kind===kind){return false}prev=node;node=node.next}prev.next=newNode(listener,kind,options);return true},configurable:true,writable:true},removeEventListener:{value:function removeEventListener(type,listener,options){if(listener==null){return false}var capture=isObject(options)?Boolean(options.capture):Boolean(options);var kind=capture?CAPTURE:BUBBLE;var prev=null;var node=this[LISTENERS][type];while(node!=null){if(node.listener===listener&&node.kind===kind){if(prev==null){this[LISTENERS][type]=node.next}else{prev.next=node.next}return true}prev=node;node=node.next}return false},configurable:true,writable:true},dispatchEvent:{value:function dispatchEvent(event){var type=event.type;var node=this[LISTENERS][type];if(node==null){return true}var wrapped=createEventWrapper(event,this);var prev=null;while(node!=null){if(node.once){if(prev==null){this[LISTENERS][type]=node.next}else{prev.next=node.next}}else{prev=node}wrapped[PASSIVE_LISTENER_FLAG]=node.passive;if(typeof node.listener==="function"){node.listener.call(this,wrapped)}else if(node.kind!==ATTRIBUTE&&typeof node.listener.handleEvent==="function"){node.listener.handleEvent(wrapped)}if(wrapped[STOP_IMMEDIATE_PROPAGATION_FLAG]){break}node=node.next}return!wrapped.defaultPrevented},configurable:true,writable:true}})},function(module,exports,__webpack_require__){var config=__webpack_require__(0);var configure=__webpack_require__(7);var storage=__webpack_require__(2);var reports=__webpack_require__(5);var _require=__webpack_require__(27),getMessageDataFrom=_require.getMessageDataFrom,debounceMessage=_require.debounceMessage;module.exports={setupBridge:setupBridge,setupIframe:setupIframe};function setupBridge(opts){if(window.location.protocol!=="https:"){throw new Error("The secure bridge must be run on an HTTPS domain that "+"is shared with the push registration page.")}configure(opts);var target=config.insecureHost;var channel=storage.getJSON("channel");var tags=storage.getJSON("tags");post({channel:channel,tags:tags});if(channel){reports.getSession().then(function(session){if(session){storage.setJSON("session",session);post({session:session})}})}window.addEventListener("storage",storage.onStorage(post));window.addEventListener("message",debounceMessage(onMessage));function onMessage(data){if(data.tags){storage.setJSON("tags",data.tags)}if(data.channel){storage.setJSON("channel",data.channel)}}function post(objs){window.parent.postMessage(prefixObject(objs),target)}}function setupIframe(url){var target=config.secureHost;var sdk=this;var el=document.createElement("iframe");var ready=new Promise(function(resolve,reject){el.onload=function(){return resolve(el)}});el.style.display="none";el.src=url;document.body.appendChild(el);window.addEventListener("message",onMessage);sdk.addEventListener("tags",function(ev){queue({tags:ev.tags})});sdk.addEventListener("channel",function(ev){var channel=storage.getJSON("channel");queue({channel:channel})});function onMessage(ev){var data=getMessageDataFrom(ev,target);sdk._set(data)}function queue(obj){ready.then(function(frame){frame.contentWindow.postMessage(prefixObject(obj),target)})}}function prefixObject(obj){var data={};data[config.storagePrefix]=obj;return data}},function(module,exports,__webpack_require__){var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var EventTarget=__webpack_require__(10);var NamedUser=__webpack_require__(21);var Tags=__webpack_require__(22);var config=__webpack_require__(0);var db=__webpack_require__(3);var debug=__webpack_require__(6);var registrationBase=__webpack_require__(14);var request=__webpack_require__(1);var storage=__webpack_require__(2);var Channel=function(_EventTarget){_inherits(Channel,_EventTarget);function Channel(){var channelData=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Channel);var _this=_possibleConstructorReturn(this,(Channel.__proto__||Object.getPrototypeOf(Channel)).call(this));_this._set(channelData);return _this}_createClass(Channel,[{key:"optOut",value:function optOut(){this.opt_in=false;this._store();return this._update(false).then(function(response){return Promise.resolve(true)})}},{key:"toJSON",value:function toJSON(){return _extends(registrationBase(),{channel_id:this.id,opt_in:this.optedIn,named_user_id:this.named_user_id})}},{key:"_set",value:function _set(channelData){this.channel_id=channelData.hasOwnProperty("channel_id")?channelData.channel_id:this.channel_id;this.opt_in=channelData.hasOwnProperty("opt_in")?channelData.opt_in:"true";this.named_user_id=channelData.hasOwnProperty("named_user_id")?channelData.named_user_id:this.named_user_id}},{key:"_store",value:function _store(){storage.setJSON("channel",{channel_id:this.id,opt_in:this.optedIn,named_user_id:this.named_user_id});db.set("channel",this.toJSON());this.dispatchEvent({type:"channel",channel:this})}},{key:"_update",value:function _update(){var omitOptIn=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var channel=this.toJSON();if(omitOptIn){delete channel.opt_in}delete channel.named_user_id;return request(this.path,{method:"put",body:{channel:channel}})}},{key:"id",get:function(){return this.channel_id}},{key:"optedIn",get:function(){try{return JSON.parse(this.opt_in)}catch(e){return true}}},{key:"namedUser",get:function(){if(!this._namedUser){this._namedUser=new NamedUser(this)}return this._namedUser}},{key:"path",get:function(){return config.paths.cra+"/"+this.id}},{key:"tags",get:function(){if(!this._tags){this._tags=new Tags(this.channel_id)}return this._tags}}]);return Channel}(EventTarget("channel"));module.exports=Channel},function(module,exports,__webpack_require__){var getBase=__webpack_require__(14);module.exports=function getRegistrationData(subscription){var channel=arguments.length>1&&arguments[1]!==undefined?arguments[1]:getBase();channel.push_address=subscription.endpoint;channel.web.subscription=subscription.toJSON().keys;return{channel:channel}}},function(module,exports,__webpack_require__){var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var bowser=__webpack_require__(33);var config=__webpack_require__(0);var SUPPORTED_BROWSERS=["chrome","edge","firefox","opera","safari"];module.exports=function getRegistrationBase(){var windowOpts={};try{var localeOptions=window.Intl.DateTimeFormat().resolvedOptions();var timezone=localeOptions.timeZone;var _localeOptions$locale=localeOptions.locale.split("-"),_localeOptions$locale2=_slicedToArray(_localeOptions$locale,2),locale_language=_localeOptions$locale2[0],locale_country=_localeOptions$locale2[1];windowOpts={timezone:timezone,locale_country:locale_country,locale_language:locale_language}}catch(e){}var user_agent_string=navigator.userAgent;var browser_name=getBrowserName(bowser.name);var browser_version=browser_name+"-"+Number(bowser.version);var browser_type=bowser.mobile||bowser.tablet?"mobile":"desktop";var web_sdk_version=config.VERSION;return _extends(windowOpts,{device_type:"web",opt_in:true,web:{user_agent_string:user_agent_string,browser_name:browser_name,browser_version:browser_version,browser_type:browser_type,web_sdk_version:web_sdk_version}})};function getBrowserName(name){name=name.toLowerCase();if(!SUPPORTED_BROWSERS.includes(name)){return"unknown"}return name}},function(module,exports,__webpack_require__){var config=__webpack_require__(0);var compareArrays=__webpack_require__(31);var urlBase64ToUint8Array=__webpack_require__(29);module.exports=function getSubscriptions(registration){return registration.pushManager.getSubscription().then(function(subscription){var vapidKey=urlBase64ToUint8Array(config.vapidPublicKey);if(subscription){if(compareArrays(new Uint8Array(subscription.options.applicationServerKey),vapidKey)){return subscription}else{return subscription.unsubscribe().then(function(success){return newSubscription()})}}return newSubscription();function newSubscription(){return registration.pushManager.subscribe({userVisibleOnly:true,applicationServerKey:vapidKey})}})}},function(module,exports,__webpack_require__){var storage=__webpack_require__(2);module.exports=isAfter;function isAfter(key,hours){key="last_"+key;var HOUR=1e3*60*60;var now=+new Date;var lastActivity=storage.getJSON(key);var store=function(){return storage.setJSON(key,now)};var after=!lastActivity||now-lastActivity>HOUR*hours;return{store:store,after:after}}},function(module,exports){module.exports=function isSecure(){var secureContext=window.isSecureContext;if(typeof secureContext!=="undefined"){return secureContext}return!!window.location.protocol.match("https")}},function(module,exports,__webpack_require__){var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var EventTarget=__webpack_require__(10);var Channel=__webpack_require__(12);var CustomEvent=__webpack_require__(4);var canRegister=__webpack_require__(30);var config=__webpack_require__(0);var debug=__webpack_require__(6);var db=__webpack_require__(3);var isAfter=__webpack_require__(16);var isSupported=__webpack_require__(8);var isSecure=__webpack_require__(17);var registrationData=__webpack_require__(13);var reports=__webpack_require__(5);var request=__webpack_require__(1);var secureBridge=__webpack_require__(11);var storage=__webpack_require__(2);var subscribe=__webpack_require__(15);var EVENT_TYPES=["channel","push","tags"];var UaSDK=function(_EventTarget){_inherits(UaSDK,_EventTarget);function UaSDK(){_classCallCheck(this,UaSDK);var _this=_possibleConstructorReturn(this,(UaSDK.__proto__||Object.getPrototypeOf(UaSDK)).call(this));var sdk=_this;_this._channelPromise=new Promise(function(resolve,reject){_this.addEventListener("channel",function(ev){return resolve(_this.channel)})});_this._workerRegistration=navigator.serviceWorker.register(config.workerUrl);_this._workerRegistration.catch(function(error){return debug(error)});_this._channelPromise.then(heartbeat);_this._channelPromise.then(checkPermission);_this.isSupported=isSupported();_this.canRegister=canRegister();if(!isSecure()&&config.secureIframeUrl){_this.setupIframe=secureBridge.setupIframe;_this.setupIframe(config.secureIframeUrl)}else{_this._channelPromise.then(function(channel){return reports.session(channel)})}_this.channel=null;var storedChannel=channelFromStorage();_this.CustomEvent=CustomEvent;if(storedChannel){_this._setChannel(storedChannel)}window.addEventListener("storage",storage.onStorage(function(data){return _this._set(data)}));navigator.serviceWorker.addEventListener("message",function(message){debug("Push event from worker",message);if(message.data.type==="push"){_this.dispatchEvent({type:"push",push:message.data.push})}});function channelFromStorage(){var channel=storage.getJSON("channel");if(channel&&channel.channel_id){return channel}}function heartbeat(channel){var _isAfter=isAfter("heartbeat",24),after=_isAfter.after,store=_isAfter.store;if(after){debug("SENDING heartbeat");store();if(channel.optedIn){sdk.register().catch(function(e){return channel._update()})}else{channel._update()}}}function checkPermission(channel){if(sdk.permission&&sdk.permission!=="granted"&&channel.optedIn){channel.optOut()}}return _this}_createClass(UaSDK,[{key:"register",value:function register(){var _this2=this;var sdk=this;return sdk._workerRegistration.then(subscribe).then(function(subscription){
var registration=registrationData(subscription);if(sdk.channel){return request(sdk.channel.path,{method:"put",body:registration})}return request(config.paths.cra,{method:"post",body:registration})}).then(function(response){return response.json()}).then(function(body){debug("CRA RESPONSE",body);var _isAfter2=isAfter("heartbeat",24),store=_isAfter2.store;store();sdk._setChannel(body);return Promise.resolve(_this2.channel)})}},{key:"_set",value:function _set(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(data.channel){this._setChannel(data.channel)}if(data.tags){if(this.channel){this.channel.tags._load(data.tags);this.channel.tags._store()}}if(data.session){this._setSession(data.session)}}},{key:"_setChannel",value:function _setChannel(channelData){var _this3=this;if(!channelData){return}if(this.channel){this.channel._set(channelData);this.channel._store();return}if(channelData&&!channelData.channel_id){return}this.channel=new Channel(channelData);this.channel._store();this.channel.addEventListener("channel",function(ev){_this3.dispatchEvent({type:"channel",channel:ev.channel})});this.channel.tags.addEventListener("tags",function(ev){_this3.dispatchEvent({type:"tags",tags:ev.tags})});this.channel._store()}},{key:"_setSession",value:function _setSession(session){storage.setJSON("session",session);this._channelPromise.then(function(channel){reports.session(channel,session)})}},{key:"disableAnalytics",get:function(){return db.get(config.consts.DISABLE_ANALYTICS).then(function(value){return!!value})},set:function(bool){return db.set(config.consts.DISABLE_ANALYTICS,!!bool)}},{key:"permission",get:function(){if(isSecure()){return window.Notification.permission}}}]);return UaSDK}(EventTarget.apply(undefined,EVENT_TYPES));module.exports=UaSDK},function(module,exports,__webpack_require__){var Channel=__webpack_require__(12);var config=__webpack_require__(0);var configure=__webpack_require__(7);var db=__webpack_require__(3);var registrationData=__webpack_require__(13);var reports=__webpack_require__(5);var request=__webpack_require__(1);var subscribe=__webpack_require__(15);module.exports=setupWorker;function setupWorker(self){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};configure(opts);self.addEventListener("push",function(ev){var payload=ev.data?ev.data.json():{};var now=Date.now()/1e3;ev.waitUntil(self.registration.getNotifications().then(function(notifications){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=notifications[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var notification=_step.value;if(notification.data.expiry&&notification.data.expiry<now){notification.close()}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}));if(payload.expiry&&payload.expiry<now){return}sendToClients(payload);var title=payload.title||config.defaultTitle;var requireInteraction=payload.require_interaction||false;if(!payload.body){return}ev.waitUntil(self.registration.showNotification(title,{body:payload.body,icon:payload.icon||config.defaultIcon,image:payload.image,data:payload,requireInteraction:requireInteraction}))});self.addEventListener("notificationclick",function(ev){ev.notification.close();var data=ev.notification.data;var action=data.action||{};var link=action["^u"]||action["^d_a"]||action["^p_a"]||config.defaultActionURL;var channel_id=data.channel_id;if(link&&self.clients.openWindow){ev.waitUntil(self.clients.openWindow(link))}ev.waitUntil(handleTags(channel_id,data.action));ev.waitUntil(reports.direct(new Channel({channel_id:channel_id}),data.send_id));ev.waitUntil(storeSendId(data.send_id))});self.addEventListener("pushsubscriptionchange",function(ev){subscribe(self.registration).then(function(subscription){db.get("channel").then(function(channel){if(!channel||!channel.channel_id){return}var registration=registrationData(subscription);var path=config.paths.cra+"/"+channel.channel_id;request(path,{method:"put",body:registration})})})});function sendToClients(payload){var msg={type:"push",push:payload};self.clients.matchAll().then(function(clients){clients.forEach(function(client){return client.postMessage(msg)})})}function handleTags(channel_id){var action=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var add=arrayify(action["^+t"]);var remove=arrayify(action["^-t"]);var body={audience:{channel:channel_id}};if(!add&&!remove){return Promise.resolve(true)}if(add){body.add={device:add}}if(remove){body.remove={device:remove}}return request(config.paths.tags,{method:"post",body:body}).then(function(response){return response.ok});function arrayify(value){if(typeof value==="string"){return[value]}return value}}function storeSendId(id){var timestamp=Date.now();return db.set("last_send_id",{id:id,timestamp:timestamp})}}},function(module,exports){module.exports={version:"1.0.0"}},function(module,exports,__webpack_require__){var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var request=__webpack_require__(1);var config=__webpack_require__(0);var NamedUser=function(){function NamedUser(channel){_classCallCheck(this,NamedUser);this.channel=channel}_createClass(NamedUser,[{key:"set",value:function set(name){var existing=this.channel.named_user_id;if(!name||existing===name){return Promise.resolve(false)}return this._request(name,"associate")}},{key:"remove",value:function remove(){var existing=this.channel.named_user_id;if(!existing){return Promise.resolve(false)}return this._request(null,"disassociate")}},{key:"_request",value:function _request(name,method){var _this=this;var path=config.paths.named_user[method];var body={channel_id:this.channel.id,device_type:"web"};if(name){body["named_user_id"]=name}return request(path,{method:"post",body:body}).then(function(response){_this.channel._set({named_user_id:name});_this.channel._store();return Promise.resolve(true)})}},{key:"id",get:function(){return this.channel.named_user_id||null}}]);return NamedUser}();module.exports=NamedUser},function(module,exports,__webpack_require__){var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var EventTarget=__webpack_require__(10);var config=__webpack_require__(0);var debug=__webpack_require__(6);var request=__webpack_require__(1);var storage=__webpack_require__(2);var Tags=function(_EventTarget){_inherits(Tags,_EventTarget);function Tags(channel_id){_classCallCheck(this,Tags);var _this=_possibleConstructorReturn(this,(Tags.__proto__||Object.getPrototypeOf(Tags)).call(this));_this.channel_id=channel_id;_this._load();return _this}_createClass(Tags,[{key:"has",value:function has(tag){var group=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"device";var group_tags=this.tagMap.get(group);return group_tags&&group_tags.has(tag)}},{key:"add",value:function add(tag){var _this2=this;var group=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"device";return new Promise(function(resolve,reject){if(_this2.has(tag,group)){return resolve(true)}if(!_this2.tagMap.has(group)){_this2.tagMap.set(group,new Set([tag]))}else{_this2.tagMap.get(group).add(tag)}return resolve(_this2._send("add",[tag],group))})}},{key:"remove",value:function remove(tag){var _this3=this;var group=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"device";return new Promise(function(resolve,reject){if(!_this3.has(tag,group)){return resolve(true)}if(_this3.tagMap.has(group)){_this3.tagMap.get(group).delete(tag)}return resolve(_this3._send("remove",[tag],group))})}},{key:"set",value:function set(newTags){var group=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"device";this.tagMap.set(group,new Set(newTags));return this._send("set",newTags,group)}},{key:"_load",value:function _load(){var storedTags=arguments.length>0&&arguments[0]!==undefined?arguments[0]:storage.getJSON("tags");var tags=new Map;try{if(storedTags){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=Object.keys(storedTags)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var group=_step.value;tags.set(group,new Set(storedTags[group]))}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}}catch(err){debug("Error loading tags:",err)}this.tagMap=tags;return this.tagMap}},{key:"_fetch",value:function _fetch(){var _this4=this;return request(config.paths.cla+"/"+this.channel_id,{method:"get"}).then(function(response){return response.json()}).then(function(body){debug("Tags from server");if(body.channel.tags){_this4.tagMap.set("device",new Set(body.channel.tags))}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=Object.keys(body.channel.tag_groups)[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var group=_step2.value;_this4.tagMap.set(group,new Set(body.channel.tag_groups[group]))}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}_this4._store();return _this4.tagMap})}},{key:"_send",value:function _send(verb,tags,group){var body={audience:{web_channel:this.channel_id}};body[verb]={};body[verb][group]=tags;this._store();return request(config.paths.tags,{method:"post",body:body}).then(function(response){return response.ok})}},{key:"_store",value:function _store(){var newTags=this.list;if(newTags!==this._tagList){storage.setJSON("tags",newTags);this._tagList=newTags;this.dispatchEvent({type:"tags",tags:newTags})}}},{key:"list",get:function(){var tagObj={};var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=this.tagMap[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _ref=_step3.value;var _ref2=_slicedToArray(_ref,2);var group=_ref2[0];var tags=_ref2[1];if(tags.size){tagObj[group]=Array.from(tags)}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}return tagObj}}]);return Tags}(EventTarget("tags"));module.exports=Tags},function(module,exports,__webpack_require__){var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CustomEvent=__webpack_require__(4);var RegisterEvent=function(_CustomEvent){_inherits(RegisterEvent,_CustomEvent);function RegisterEvent(value,properties,transactionId){_classCallCheck(this,RegisterEvent);var _this=_possibleConstructorReturn(this,(RegisterEvent.__proto__||Object.getPrototypeOf(RegisterEvent)).call(this,"registered_account",value,properties,transactionId));_this.templateType="account";return _this}_createClass(RegisterEvent,[{key:"_prepareProperties",value:function _prepareProperties(){if(this.value){this.properties.ltv=true}return _get(RegisterEvent.prototype.__proto__||Object.getPrototypeOf(RegisterEvent.prototype),"_prepareProperties",this).call(this)}}]);return RegisterEvent}(CustomEvent);module.exports={RegisterEvent:RegisterEvent}},function(module,exports,__webpack_require__){var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CustomEvent=__webpack_require__(4);var MediaEvent=function(_CustomEvent){_inherits(MediaEvent,_CustomEvent);function MediaEvent(name,value,properties,transactionId){_classCallCheck(this,MediaEvent);var _this=_possibleConstructorReturn(this,(MediaEvent.__proto__||Object.getPrototypeOf(MediaEvent)).call(this,name,value,properties,transactionId));_this.templateType="media";return _this}_createClass(MediaEvent,[{key:"validate",value:function validate(){this._validateBooleanProperty("feature");this._validateIsoDateProperty("published_date");return _get(MediaEvent.prototype.__proto__||Object.getPrototypeOf(MediaEvent.prototype),"validate",this).call(this)}},{key:"_prepareProperties",value:function _prepareProperties(){if(this.value){this.properties.ltv=true}return _get(MediaEvent.prototype.__proto__||Object.getPrototypeOf(MediaEvent.prototype),"_prepareProperties",this).call(this)}}]);return MediaEvent}(CustomEvent);var BrowsedContentEvent=function(_MediaEvent){_inherits(BrowsedContentEvent,_MediaEvent);function BrowsedContentEvent(value,properties,transactionId){_classCallCheck(this,BrowsedContentEvent);return _possibleConstructorReturn(this,(BrowsedContentEvent.__proto__||Object.getPrototypeOf(BrowsedContentEvent)).call(this,"browsed_content",value,properties,transactionId))}return BrowsedContentEvent}(MediaEvent);var ConsumedContentEvent=function(_MediaEvent2){_inherits(ConsumedContentEvent,_MediaEvent2);function ConsumedContentEvent(value,properties,transactionId){_classCallCheck(this,ConsumedContentEvent);return _possibleConstructorReturn(this,(ConsumedContentEvent.__proto__||Object.getPrototypeOf(ConsumedContentEvent)).call(this,"consumed_content",value,properties,transactionId))}return ConsumedContentEvent}(MediaEvent);var StarredContentEvent=function(_MediaEvent3){_inherits(StarredContentEvent,_MediaEvent3);function StarredContentEvent(value,properties,transactionId){_classCallCheck(this,StarredContentEvent);return _possibleConstructorReturn(this,(StarredContentEvent.__proto__||Object.getPrototypeOf(StarredContentEvent)).call(this,"starred_content",value,properties,transactionId))}return StarredContentEvent}(MediaEvent);var SharedContentEvent=function(_MediaEvent4){_inherits(SharedContentEvent,_MediaEvent4);function SharedContentEvent(source,medium,properties,transactionId){_classCallCheck(this,SharedContentEvent);var _this5=_possibleConstructorReturn(this,(SharedContentEvent.__proto__||Object.getPrototypeOf(SharedContentEvent)).call(this,"shared_content",undefined,properties,transactionId));_this5.properties.source=source;_this5.properties.medium=medium;return _this5}return SharedContentEvent}(MediaEvent);module.exports={_MediaEvent:MediaEvent,BrowsedContentEvent:BrowsedContentEvent,ConsumedContentEvent:ConsumedContentEvent,StarredContentEvent:StarredContentEvent,SharedContentEvent:SharedContentEvent}},function(module,exports,__webpack_require__){var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var CustomEvent=__webpack_require__(4);var RetailEvent=function(_CustomEvent){_inherits(RetailEvent,_CustomEvent);function RetailEvent(name,value,properties,transactionId){_classCallCheck(this,RetailEvent);var _this=_possibleConstructorReturn(this,(RetailEvent.__proto__||Object.getPrototypeOf(RetailEvent)).call(this,name,value,properties,transactionId));_this.templateType="retail";return _this}_createClass(RetailEvent,[{key:"validate",value:function validate(){this._validateBooleanProperty("new_item");return _get(RetailEvent.prototype.__proto__||Object.getPrototypeOf(RetailEvent.prototype),"validate",this).call(this)}}]);return RetailEvent}(CustomEvent);var BrowsedEvent=function(_RetailEvent){_inherits(BrowsedEvent,_RetailEvent);function BrowsedEvent(value,properties,transactionId){_classCallCheck(this,BrowsedEvent);return _possibleConstructorReturn(this,(BrowsedEvent.__proto__||Object.getPrototypeOf(BrowsedEvent)).call(this,"browsed",value,properties,transactionId))}return BrowsedEvent}(RetailEvent);var AddedToCartEvent=function(_RetailEvent2){_inherits(AddedToCartEvent,_RetailEvent2);function AddedToCartEvent(value,properties,transactionId){_classCallCheck(this,AddedToCartEvent);return _possibleConstructorReturn(this,(AddedToCartEvent.__proto__||Object.getPrototypeOf(AddedToCartEvent)).call(this,"added_to_cart",value,properties,transactionId))}return AddedToCartEvent}(RetailEvent);var PurchasedEvent=function(_RetailEvent3){_inherits(PurchasedEvent,_RetailEvent3);function PurchasedEvent(value,properties,transactionId){_classCallCheck(this,PurchasedEvent);return _possibleConstructorReturn(this,(PurchasedEvent.__proto__||Object.getPrototypeOf(PurchasedEvent)).call(this,"purchased",value,properties,transactionId))}_createClass(PurchasedEvent,[{key:"_prepareProperties",value:function _prepareProperties(){if(this.value){this.properties.ltv=true}return _get(PurchasedEvent.prototype.__proto__||Object.getPrototypeOf(PurchasedEvent.prototype),"_prepareProperties",this).call(this)}}]);return PurchasedEvent}(RetailEvent);var StarredProductEvent=function(_RetailEvent4){_inherits(StarredProductEvent,_RetailEvent4);function StarredProductEvent(value,properties,transactionId){_classCallCheck(this,StarredProductEvent);return _possibleConstructorReturn(this,(StarredProductEvent.__proto__||Object.getPrototypeOf(StarredProductEvent)).call(this,"starred_product",value,properties,transactionId))}return StarredProductEvent}(RetailEvent);var SharedProductEvent=function(_RetailEvent5){_inherits(SharedProductEvent,_RetailEvent5);function SharedProductEvent(source,medium,properties,transactionId){_classCallCheck(this,SharedProductEvent);var _this6=_possibleConstructorReturn(this,(SharedProductEvent.__proto__||Object.getPrototypeOf(SharedProductEvent)).call(this,"shared_product",undefined,properties,transactionId));_this6.properties.source=source;_this6.properties.medium=medium;return _this6}return SharedProductEvent}(RetailEvent);module.exports={_RetailEvent:RetailEvent,AddedToCartEvent:AddedToCartEvent,BrowsedEvent:BrowsedEvent,PurchasedEvent:PurchasedEvent,StarredProductEvent:StarredProductEvent,SharedProductEvent:SharedProductEvent}},function(module,exports,__webpack_require__){var UaSDK=__webpack_require__(18);var isSupported=__webpack_require__(8);var secureBridge=__webpack_require__(11);var setupWorker=__webpack_require__(19);var configure=__webpack_require__(7);try{var script=document.getElementById("_uasdk");if(script&&window[script.rel]){window[script.rel]._setup(setup)}else if(script&&script.rel==="secureBridge"){window.uaSetup={secureBridge:secureBridge}}else{window.uaSetup=uaSetup}}catch(e){if(e instanceof ReferenceError&&self){self.uaSetup={worker:setupWorker}}}function setup(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};configure(opts);if(!isSupported()){throw new Error("Browser is not supported")}return new UaSDK}uaSetup.isSupported=isSupported();uaSetup.secureBridge=secureBridge.setupBridge;uaSetup.worker=setupWorker;function uaSetup(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};configure(opts);if(!isSupported()){return{register:noop,isSupported:false,canRegister:false,channel:null,onchannel:null,ontags:null,onpush:null}}return new UaSDK;function noop(){}}},function(module,exports,__webpack_require__){var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var config=__webpack_require__(0);module.exports={getMessageDataFrom:getMessageDataFrom,debounceMessage:debounceMessage};function debounceMessage(onMessage){var timeout=void 0;var cache={};return function call(ev){clearTimeout(timeout);var data=getMessageDataFrom(ev,config.insecureHost);_extends(cache,data);timeout=setTimeout(function(){onMessage(cache);cache={}},20)}}function getMessageDataFrom(ev,host){var data=ev.data[config.storagePrefix];if(ev.origin!==host||!data){return{}}return data}},function(module,exports,__webpack_require__){var db=__webpack_require__(3);var DELTA=20*1e3;module.exports=function getSendId(){var now=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Date.now();return db.get("last_send_id").then(function(result){if(result&&now-result.timestamp<=DELTA){return db.remove("last_send_id").then(function(){return result.id})}})}},function(module,exports){var global=void 0;try{global=window}catch(e){global=self}module.exports=function urlBase64ToUint8Array(base64String){var padding="=".repeat((4-base64String.length%4)%4);var base64=(base64String+padding).replace(/\-/g,"+").replace(/_/g,"/");var rawData=global.atob(base64);var outputArray=new Uint8Array(rawData.length);for(var i=0;i<rawData.length;++i){outputArray[i]=rawData.charCodeAt(i)}return outputArray}},function(module,exports,__webpack_require__){var isSupported=__webpack_require__(8);var isSecure=__webpack_require__(17);module.exports=function canRegister(){return!!(isSupported()&&isSecure()&&Notification.permission!=="denied")}},function(module,exports){module.exports=compareArrays;function compareArrays(a1,a2){return a1.length===a2.length&&a1.every(function(val,i){return val===a2[i]})}},function(module,exports){module.exports=function(){return window.location}},function(module,exports,__webpack_require__){!function(root,name,definition){if(typeof module!="undefined"&&module.exports)module.exports=definition();else if(true)__webpack_require__(40)(name,definition);else root[name]=definition()}(this,"bowser",function(){var t=true;function detect(ua){function getFirstMatch(regex){var match=ua.match(regex);return match&&match.length>1&&match[1]||""}function getSecondMatch(regex){var match=ua.match(regex);return match&&match.length>1&&match[2]||""}var iosdevice=getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase(),likeAndroid=/like android/i.test(ua),android=!likeAndroid&&/android/i.test(ua),nexusMobile=/nexus\s*[0-6]\s*/i.test(ua),nexusTablet=!nexusMobile&&/nexus\s*[0-9]+/i.test(ua),chromeos=/CrOS/.test(ua),silk=/silk/i.test(ua),sailfish=/sailfish/i.test(ua),tizen=/tizen/i.test(ua),webos=/(web|hpw)os/i.test(ua),windowsphone=/windows phone/i.test(ua),samsungBrowser=/SamsungBrowser/i.test(ua),windows=!windowsphone&&/windows/i.test(ua),mac=!iosdevice&&!silk&&/macintosh/i.test(ua),linux=!android&&!sailfish&&!tizen&&!webos&&/linux/i.test(ua),edgeVersion=getFirstMatch(/edge\/(\d+(\.\d+)?)/i),versionIdentifier=getFirstMatch(/version\/(\d+(\.\d+)?)/i),tablet=/tablet/i.test(ua),mobile=!tablet&&/[^-]mobi/i.test(ua),xbox=/xbox/i.test(ua),result;if(/opera/i.test(ua)){result={name:"Opera",opera:t,version:versionIdentifier||getFirstMatch(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}}else if(/opr|opios/i.test(ua)){result={name:"Opera",opera:t,version:getFirstMatch(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||versionIdentifier}}else if(/SamsungBrowser/i.test(ua)){result={name:"Samsung Internet for Android",samsungBrowser:t,version:versionIdentifier||getFirstMatch(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}}else if(/coast/i.test(ua)){result={name:"Opera Coast",coast:t,version:versionIdentifier||getFirstMatch(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}}else if(/yabrowser/i.test(ua)){result={name:"Yandex Browser",yandexbrowser:t,version:versionIdentifier||getFirstMatch(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}}else if(/ucbrowser/i.test(ua)){result={name:"UC Browser",ucbrowser:t,version:getFirstMatch(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}}else if(/mxios/i.test(ua)){result={name:"Maxthon",maxthon:t,version:getFirstMatch(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}}else if(/epiphany/i.test(ua)){result={name:"Epiphany",epiphany:t,version:getFirstMatch(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}}else if(/puffin/i.test(ua)){result={name:"Puffin",puffin:t,version:getFirstMatch(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}}else if(/sleipnir/i.test(ua)){result={name:"Sleipnir",sleipnir:t,version:getFirstMatch(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}}else if(/k-meleon/i.test(ua)){result={name:"K-Meleon",kMeleon:t,version:getFirstMatch(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}}else if(windowsphone){result={name:"Windows Phone",windowsphone:t};if(edgeVersion){result.msedge=t;result.version=edgeVersion}else{result.msie=t;result.version=getFirstMatch(/iemobile\/(\d+(\.\d+)?)/i)}}else if(/msie|trident/i.test(ua)){result={name:"Internet Explorer",msie:t,version:getFirstMatch(/(?:msie |rv:)(\d+(\.\d+)?)/i)}}else if(chromeos){result={name:"Chrome",chromeos:t,chromeBook:t,chrome:t,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}}else if(/chrome.+? edge/i.test(ua)){result={name:"Microsoft Edge",msedge:t,version:edgeVersion}}else if(/vivaldi/i.test(ua)){result={name:"Vivaldi",vivaldi:t,version:getFirstMatch(/vivaldi\/(\d+(\.\d+)?)/i)||versionIdentifier}}else if(sailfish){result={name:"Sailfish",sailfish:t,version:getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i)
}}else if(/seamonkey\//i.test(ua)){result={name:"SeaMonkey",seamonkey:t,version:getFirstMatch(/seamonkey\/(\d+(\.\d+)?)/i)}}else if(/firefox|iceweasel|fxios/i.test(ua)){result={name:"Firefox",firefox:t,version:getFirstMatch(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)};if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(ua)){result.firefoxos=t}}else if(silk){result={name:"Amazon Silk",silk:t,version:getFirstMatch(/silk\/(\d+(\.\d+)?)/i)}}else if(/phantom/i.test(ua)){result={name:"PhantomJS",phantom:t,version:getFirstMatch(/phantomjs\/(\d+(\.\d+)?)/i)}}else if(/slimerjs/i.test(ua)){result={name:"SlimerJS",slimer:t,version:getFirstMatch(/slimerjs\/(\d+(\.\d+)?)/i)}}else if(/blackberry|\bbb\d+/i.test(ua)||/rim\stablet/i.test(ua)){result={name:"BlackBerry",blackberry:t,version:versionIdentifier||getFirstMatch(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}}else if(webos){result={name:"WebOS",webos:t,version:versionIdentifier||getFirstMatch(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(ua)&&(result.touchpad=t)}else if(/bada/i.test(ua)){result={name:"Bada",bada:t,version:getFirstMatch(/dolfin\/(\d+(\.\d+)?)/i)}}else if(tizen){result={name:"Tizen",tizen:t,version:getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||versionIdentifier}}else if(/qupzilla/i.test(ua)){result={name:"QupZilla",qupzilla:t,version:getFirstMatch(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||versionIdentifier}}else if(/chromium/i.test(ua)){result={name:"Chromium",chromium:t,version:getFirstMatch(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||versionIdentifier}}else if(/chrome|crios|crmo/i.test(ua)){result={name:"Chrome",chrome:t,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}}else if(android){result={name:"Android",version:versionIdentifier}}else if(/safari|applewebkit/i.test(ua)){result={name:"Safari",safari:t};if(versionIdentifier){result.version=versionIdentifier}}else if(iosdevice){result={name:iosdevice=="iphone"?"iPhone":iosdevice=="ipad"?"iPad":"iPod"};if(versionIdentifier){result.version=versionIdentifier}}else if(/googlebot/i.test(ua)){result={name:"Googlebot",googlebot:t,version:getFirstMatch(/googlebot\/(\d+(\.\d+))/i)||versionIdentifier}}else{result={name:getFirstMatch(/^(.*)\/(.*) /),version:getSecondMatch(/^(.*)\/(.*) /)}}if(!result.msedge&&/(apple)?webkit/i.test(ua)){if(/(apple)?webkit\/537\.36/i.test(ua)){result.name=result.name||"Blink";result.blink=t}else{result.name=result.name||"Webkit";result.webkit=t}if(!result.version&&versionIdentifier){result.version=versionIdentifier}}else if(!result.opera&&/gecko\//i.test(ua)){result.name=result.name||"Gecko";result.gecko=t;result.version=result.version||getFirstMatch(/gecko\/(\d+(\.\d+)?)/i)}if(!result.windowsphone&&!result.msedge&&(android||result.silk)){result.android=t}else if(!result.windowsphone&&!result.msedge&&iosdevice){result[iosdevice]=t;result.ios=t}else if(mac){result.mac=t}else if(xbox){result.xbox=t}else if(windows){result.windows=t}else if(linux){result.linux=t}var osVersion="";if(result.windowsphone){osVersion=getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i)}else if(iosdevice){osVersion=getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i);osVersion=osVersion.replace(/[_\s]/g,".")}else if(android){osVersion=getFirstMatch(/android[ \/-](\d+(\.\d+)*)/i)}else if(result.webos){osVersion=getFirstMatch(/(?:web|hpw)os\/(\d+(\.\d+)*)/i)}else if(result.blackberry){osVersion=getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i)}else if(result.bada){osVersion=getFirstMatch(/bada\/(\d+(\.\d+)*)/i)}else if(result.tizen){osVersion=getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i)}if(osVersion){result.osversion=osVersion}var osMajorVersion=osVersion.split(".")[0];if(tablet||nexusTablet||iosdevice=="ipad"||android&&(osMajorVersion==3||osMajorVersion>=4&&!mobile)||result.silk){result.tablet=t}else if(mobile||iosdevice=="iphone"||iosdevice=="ipod"||android||nexusMobile||result.blackberry||result.webos||result.bada){result.mobile=t}if(result.msedge||result.msie&&result.version>=10||result.yandexbrowser&&result.version>=15||result.vivaldi&&result.version>=1||result.chrome&&result.version>=20||result.samsungBrowser&&result.version>=4||result.firefox&&result.version>=20||result.safari&&result.version>=6||result.opera&&result.version>=10||result.ios&&result.osversion&&result.osversion.split(".")[0]>=6||result.blackberry&&result.version>=10.1||result.chromium&&result.version>=20){result.a=t}else if(result.msie&&result.version<10||result.chrome&&result.version<20||result.firefox&&result.version<20||result.safari&&result.version<6||result.opera&&result.version<10||result.ios&&result.osversion&&result.osversion.split(".")[0]<6||result.chromium&&result.version<20){result.c=t}else result.x=t;return result}var bowser=detect(typeof navigator!=="undefined"?navigator.userAgent||"":"");bowser.test=function(browserList){for(var i=0;i<browserList.length;++i){var browserItem=browserList[i];if(typeof browserItem==="string"){if(browserItem in bowser){return true}}}return false};function getVersionPrecision(version){return version.split(".").length}function map(arr,iterator){var result=[],i;if(Array.prototype.map){return Array.prototype.map.call(arr,iterator)}for(i=0;i<arr.length;i++){result.push(iterator(arr[i]))}return result}function compareVersions(versions){var precision=Math.max(getVersionPrecision(versions[0]),getVersionPrecision(versions[1]));var chunks=map(versions,function(version){var delta=precision-getVersionPrecision(version);version=version+new Array(delta+1).join(".0");return map(version.split("."),function(chunk){return new Array(20-chunk.length).join("0")+chunk}).reverse()});while(--precision>=0){if(chunks[0][precision]>chunks[1][precision]){return 1}else if(chunks[0][precision]===chunks[1][precision]){if(precision===0){return 0}}else{return-1}}}function isUnsupportedBrowser(minVersions,strictMode,ua){var _bowser=bowser;if(typeof strictMode==="string"){ua=strictMode;strictMode=void 0}if(strictMode===void 0){strictMode=false}if(ua){_bowser=detect(ua)}var version=""+_bowser.version;for(var browser in minVersions){if(minVersions.hasOwnProperty(browser)){if(_bowser[browser]){if(typeof minVersions[browser]!=="string"){throw new Error("Browser version in the minVersion map should be a string: "+browser+": "+String(minVersions))}return compareVersions([version,minVersions[browser]])<0}}}return strictMode}function check(minVersions,strictMode,ua){return!isUnsupportedBrowser(minVersions,strictMode,ua)}bowser.isUnsupportedBrowser=isUnsupportedBrowser;bowser.compareVersions=compareVersions;bowser.check=check;bowser._detect=detect;return bowser})},function(module,exports,__webpack_require__){"use strict";var Commons=__webpack_require__(9);var LISTENERS=Commons.LISTENERS;var ATTRIBUTE=Commons.ATTRIBUTE;var newNode=Commons.newNode;function getAttributeListener(eventTarget,type){var node=eventTarget[LISTENERS][type];while(node!=null){if(node.kind===ATTRIBUTE){return node.listener}node=node.next}return null}function setAttributeListener(eventTarget,type,listener){if(typeof listener!=="function"&&typeof listener!=="object"){listener=null}var prev=null;var node=eventTarget[LISTENERS][type];while(node!=null){if(node.kind===ATTRIBUTE){if(prev==null){eventTarget[LISTENERS][type]=node.next}else{prev.next=node.next}}else{prev=node}node=node.next}if(listener!=null){if(prev==null){eventTarget[LISTENERS][type]=newNode(listener,ATTRIBUTE)}else{prev.next=newNode(listener,ATTRIBUTE)}}}module.exports.defineCustomEventTarget=function(EventTargetBase,types){function EventTarget(){EventTargetBase.call(this)}var descripter={constructor:{value:EventTarget,configurable:true,writable:true}};types.forEach(function(type){descripter["on"+type]={get:function(){return getAttributeListener(this,type)},set:function(listener){setAttributeListener(this,type,listener)},configurable:true,enumerable:true}});EventTarget.prototype=Object.create(EventTargetBase.prototype,descripter);return EventTarget}},function(module,exports,__webpack_require__){"use strict";var createUniqueKey=__webpack_require__(9).createUniqueKey;var STOP_IMMEDIATE_PROPAGATION_FLAG=createUniqueKey("stop_immediate_propagation_flag");var CANCELED_FLAG=createUniqueKey("canceled_flag");var PASSIVE_LISTENER_FLAG=createUniqueKey("passive_listener_flag");var ORIGINAL_EVENT=createUniqueKey("original_event");var wrapperPrototypeDefinition=Object.freeze({stopPropagation:Object.freeze({value:function stopPropagation(){var e=this[ORIGINAL_EVENT];if(typeof e.stopPropagation==="function"){e.stopPropagation()}},writable:true,configurable:true}),stopImmediatePropagation:Object.freeze({value:function stopImmediatePropagation(){this[STOP_IMMEDIATE_PROPAGATION_FLAG]=true;var e=this[ORIGINAL_EVENT];if(typeof e.stopImmediatePropagation==="function"){e.stopImmediatePropagation()}},writable:true,configurable:true}),preventDefault:Object.freeze({value:function preventDefault(){if(this[PASSIVE_LISTENER_FLAG]){return}if(this.cancelable===true){this[CANCELED_FLAG]=true}var e=this[ORIGINAL_EVENT];if(typeof e.preventDefault==="function"){e.preventDefault()}},writable:true,configurable:true}),defaultPrevented:Object.freeze({get:function defaultPrevented(){return this[CANCELED_FLAG]},enumerable:true,configurable:true})});module.exports.STOP_IMMEDIATE_PROPAGATION_FLAG=STOP_IMMEDIATE_PROPAGATION_FLAG;module.exports.PASSIVE_LISTENER_FLAG=PASSIVE_LISTENER_FLAG;module.exports.createEventWrapper=function createEventWrapper(event,eventTarget){var timeStamp=typeof event.timeStamp==="number"?event.timeStamp:Date.now();var propertyDefinition={type:{value:event.type,enumerable:true},target:{value:eventTarget,enumerable:true},currentTarget:{value:eventTarget,enumerable:true},eventPhase:{value:2,enumerable:true},bubbles:{value:Boolean(event.bubbles),enumerable:true},cancelable:{value:Boolean(event.cancelable),enumerable:true},timeStamp:{value:timeStamp,enumerable:true},isTrusted:{value:false,enumerable:true}};propertyDefinition[STOP_IMMEDIATE_PROPAGATION_FLAG]={value:false,writable:true};propertyDefinition[CANCELED_FLAG]={value:false,writable:true};propertyDefinition[PASSIVE_LISTENER_FLAG]={value:false,writable:true};propertyDefinition[ORIGINAL_EVENT]={value:event};if(typeof event.detail!=="undefined"){propertyDefinition.detail={value:event.detail,enumerable:true}}return Object.create(Object.create(event,wrapperPrototypeDefinition),propertyDefinition)}},function(module,exports){module.exports=isIsodate;var matcher=new RegExp("^\\d{4}-\\d{2}-\\d{2}"+"((T\\d{2}:\\d{2}(:\\d{2})?)"+"(\\.\\d{1,6})?"+"(Z|(\\+|-)\\d{2}:\\d{2})?)?$");function isIsodate(string){return typeof string==="string"&&matcher.test(string)&&!isNaN(Date.parse(string))}},function(module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}module.exports=bytesToUuid},function(module,exports,__webpack_require__){(function(global){var rng;var crypto=global.crypto||global.msCrypto;if(crypto&&crypto.getRandomValues){var rnds8=new Uint8Array(16);rng=function whatwgRNG(){crypto.getRandomValues(rnds8);return rnds8}}if(!rng){var rnds=new Array(16);rng=function(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;rnds[i]=r>>>((i&3)<<3)&255}return rnds}}module.exports=rng}).call(exports,__webpack_require__(41))},function(module,exports,__webpack_require__){var rng=__webpack_require__(38);var bytesToUuid=__webpack_require__(37);function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options=="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}module.exports=v4},function(module,exports){module.exports=function(){throw new Error("define cannot be used indirect")}},function(module,exports){var g;g=function(){return this}();try{g=g||Function("return this")()||(1,eval)("this")}catch(e){if(typeof window==="object")g=window}module.exports=g}]);
//# sourceMappingURL=./dist/ua-sdk.min.js.map